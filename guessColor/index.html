<!DOCTYPE HTML>

<html>
<head>
	<meta charset="utf-8">
	<title>猜颜色</title>
	<script type="text/javascript" src="pixi.min.js"></script>
</head>
<body>

<script type="text/javascript">

let Application = PIXI.Application,
    loader = PIXI.loader,
    resources = PIXI.loader.resources,
    TextureCache = PIXI.utils.TextureCache,
    Sprite = PIXI.Sprite;	

	let app = new PIXI.Application({ 
    width: 500, 
    height: 300,                       
    antialiasing: true, 
    transparent: false, 
    resolution: 1
  }
);
	document.body.appendChild(app.view);

var id;

loader
  .add("src/2020073012594000-79127164CA4A94F74187421B24A3AA8D.jpg")
  .add("src/guessColorSources.json")
  .load(setup);

pinNames = ["bluePin","redPin","greenPin","yellowPin","pinkPin","grayPin"];

function setup()
{
	backgroundTexture = TextureCache["src/2020073012594000-79127164CA4A94F74187421B24A3AA8D.jpg"];
	
	backgroundImage = new Sprite(backgroundTexture);
	backgroundImage.width = app.view.width;
	backgroundImage.height = app.view.height;
	app.stage.addChild(backgroundImage);

	let id = PIXI.loader.resources["src/guessColorSources.json"].textures;


	for(i=0;i<6;i++)
	{
		obj = new Sprite(id[pinNames[i]]);
		obj.width = 28;
		obj.height=28;
		obj.x = 150+i*(185-150);
		obj.y = 258;
		obj.interactive = true;
		obj.on('pointerdown', onDragStart)
	   		.on('pointerup', onDragEnd)
	   		.on('pointerupoutside', onDragEnd)
	   		.on('pointermove', onDragMove);
		app.stage.addChild(obj);
	}

}

function onDragStart(event) {
	this.data = event.data;
	this.alpha = 0.5;
	this.dragging = true;
}
 
function onDragEnd(event) {
	this.alpha = 1;
	this.dragging = false;
	this.data = null;
}
 
function onDragMove(event) {
	if(this.dragging) {
		var newPosition = this.data.getLocalPosition(this.parent); //获取鼠标移动的位置
		this.position.x = newPosition.x-this.width/2;
		this.position.y = newPosition.y-this.height/2;
	}
}

</script>

</body>

</html>

