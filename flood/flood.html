<!DOCTYPE HTML>
<html>
<head>
  <link rel="stylesheet" href="https://cdn.staticfile.org/foundation/5.5.3/css/foundation.min.css">
  <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.staticfile.org/foundation/5.5.3/js/foundation.min.js"></script>
  <script src="https://cdn.staticfile.org/foundation/5.5.3/js/vendor/modernizr.js"></script>
<style>
table tr td
{
border:0px;
height:30px;
width:30px;
}
button
{
    height:50px;
    width:50px;
    visibility:hidden;
}

div
{
    width:75%;
    margin:0 auto;
    padding:30px;
}
</style>

</head>
<body>
<div>
<div>
  <div id="winFlag" data-alert class="alert-box success" style="display:none;">
    <strong>Success!</strong>You win the game.
  </div>
  <div id="LOSTFlag" data-alert class="alert-box alert" style="display:none;">
    <strong>GAME OVER</strong>
  </div>
</div>
<div class="progress">
    <span id="stepCounter" class="meter" style="width:0%"></span>
  </div>
<table>
<tr>
<td id="0000"></td><td id="0001"></td><td id="0002"></td><td id="0003"></td><td id="0004"></td><td id="0005"></td><td id="0006"></td><td id="0007"></td><td id="0008"></td><td id="0009"></td><td id="0010"></td><td id="0011"></td><td id="0012"></td><td id="0013"></td><td id="0014"></td><td id="0015"></td></tr>
<tr>
<td id="0100"></td><td id="0101"></td><td id="0102"></td><td id="0103"></td><td id="0104"></td><td id="0105"></td><td id="0106"></td><td id="0107"></td><td id="0108"></td><td id="0109"></td><td id="0110"></td><td id="0111"></td><td id="0112"></td><td id="0113"></td><td id="0114"></td><td id="0115"></td></tr>
<tr>
<td id="0200"></td><td id="0201"></td><td id="0202"></td><td id="0203"></td><td id="0204"></td><td id="0205"></td><td id="0206"></td><td id="0207"></td><td id="0208"></td><td id="0209"></td><td id="0210"></td><td id="0211"></td><td id="0212"></td><td id="0213"></td><td id="0214"></td><td id="0215"></td></tr>
<tr>
<td id="0300"></td><td id="0301"></td><td id="0302"></td><td id="0303"></td><td id="0304"></td><td id="0305"></td><td id="0306"></td><td id="0307"></td><td id="0308"></td><td id="0309"></td><td id="0310"></td><td id="0311"></td><td id="0312"></td><td id="0313"></td><td id="0314"></td><td id="0315"></td></tr>
<tr>
<td id="0400"></td><td id="0401"></td><td id="0402"></td><td id="0403"></td><td id="0404"></td><td id="0405"></td><td id="0406"></td><td id="0407"></td><td id="0408"></td><td id="0409"></td><td id="0410"></td><td id="0411"></td><td id="0412"></td><td id="0413"></td><td id="0414"></td><td id="0415"></td></tr>
<tr>
<td id="0500"></td><td id="0501"></td><td id="0502"></td><td id="0503"></td><td id="0504"></td><td id="0505"></td><td id="0506"></td><td id="0507"></td><td id="0508"></td><td id="0509"></td><td id="0510"></td><td id="0511"></td><td id="0512"></td><td id="0513"></td><td id="0514"></td><td id="0515"></td></tr>
<tr>
<td id="0600"></td><td id="0601"></td><td id="0602"></td><td id="0603"></td><td id="0604"></td><td id="0605"></td><td id="0606"></td><td id="0607"></td><td id="0608"></td><td id="0609"></td><td id="0610"></td><td id="0611"></td><td id="0612"></td><td id="0613"></td><td id="0614"></td><td id="0615"></td></tr>
<tr>
<td id="0700"></td><td id="0701"></td><td id="0702"></td><td id="0703"></td><td id="0704"></td><td id="0705"></td><td id="0706"></td><td id="0707"></td><td id="0708"></td><td id="0709"></td><td id="0710"></td><td id="0711"></td><td id="0712"></td><td id="0713"></td><td id="0714"></td><td id="0715"></td></tr>
<tr>
<td id="0800"></td><td id="0801"></td><td id="0802"></td><td id="0803"></td><td id="0804"></td><td id="0805"></td><td id="0806"></td><td id="0807"></td><td id="0808"></td><td id="0809"></td><td id="0810"></td><td id="0811"></td><td id="0812"></td><td id="0813"></td><td id="0814"></td><td id="0815"></td></tr>
<tr>
<td id="0900"></td><td id="0901"></td><td id="0902"></td><td id="0903"></td><td id="0904"></td><td id="0905"></td><td id="0906"></td><td id="0907"></td><td id="0908"></td><td id="0909"></td><td id="0910"></td><td id="0911"></td><td id="0912"></td><td id="0913"></td><td id="0914"></td><td id="0915"></td></tr>
<tr>
<td id="1000"></td><td id="1001"></td><td id="1002"></td><td id="1003"></td><td id="1004"></td><td id="1005"></td><td id="1006"></td><td id="1007"></td><td id="1008"></td><td id="1009"></td><td id="1010"></td><td id="1011"></td><td id="1012"></td><td id="1013"></td><td id="1014"></td><td id="1015"></td></tr>
<tr>
<td id="1100"></td><td id="1101"></td><td id="1102"></td><td id="1103"></td><td id="1104"></td><td id="1105"></td><td id="1106"></td><td id="1107"></td><td id="1108"></td><td id="1109"></td><td id="1110"></td><td id="1111"></td><td id="1112"></td><td id="1113"></td><td id="1114"></td><td id="1115"></td></tr>
<tr>
<td id="1200"></td><td id="1201"></td><td id="1202"></td><td id="1203"></td><td id="1204"></td><td id="1205"></td><td id="1206"></td><td id="1207"></td><td id="1208"></td><td id="1209"></td><td id="1210"></td><td id="1211"></td><td id="1212"></td><td id="1213"></td><td id="1214"></td><td id="1215"></td></tr>
<tr>
<td id="1300"></td><td id="1301"></td><td id="1302"></td><td id="1303"></td><td id="1304"></td><td id="1305"></td><td id="1306"></td><td id="1307"></td><td id="1308"></td><td id="1309"></td><td id="1310"></td><td id="1311"></td><td id="1312"></td><td id="1313"></td><td id="1314"></td><td id="1315"></td></tr>
<tr>
<td id="1400"></td><td id="1401"></td><td id="1402"></td><td id="1403"></td><td id="1404"></td><td id="1405"></td><td id="1406"></td><td id="1407"></td><td id="1408"></td><td id="1409"></td><td id="1410"></td><td id="1411"></td><td id="1412"></td><td id="1413"></td><td id="1414"></td><td id="1415"></td></tr>
<tr>
<td id="1500"></td><td id="1501"></td><td id="1502"></td><td id="1503"></td><td id="1504"></td><td id="1505"></td><td id="1506"></td><td id="1507"></td><td id="1508"></td><td id="1509"></td><td id="1510"></td><td id="1511"></td><td id="1512"></td><td id="1513"></td><td id="1514"></td><td id="1515"></td></tr>
</table>

</div>


<div>
<button onclick="select(0)" id="b0"></button>
<button onclick="select(1)" id="b1"></button>
<button onclick="select(2)" id="b2"></button>
<button onclick="select(3)" id="b3"></button>
<button onclick="select(4)" id="b4"></button>
<button onclick="select(5)" id="b5"></button>
<button onclick="select(6)" id="b6"></button>
<button onclick="select(7)" id="b7"></button>
<button onclick="select(8)" id="b8"></button>
</div>

</body>

<script>

var CLASS=7;

var steps;
var bitmap=new Array();
var bgColor=new Array("#FF0000","#00FF00","#00FFFF","#FF00FF","#FFFF00","#1335f6","#8e32ec","#ee2b34","#ee792b","#eecf2b","#77ee2b");
var dir=new Array({x:0,y:1},{x:0,y:-1},{x:-1,y:0},{x:1,y:0});
for(var i=0;i<16;i++)
    bitmap[i]=new Array();

function dfs(i,j,prev,curr)
{
    if(prev==curr)
        return ;
    
    if(i>=0 && i<16 && j>=0 && j<16)
    if(bitmap[i][j]==prev)
    {
        bitmap[i][j]=curr;
        for(var k=0;k<dir.length;k++)
            dfs(i+dir[k].x,j+dir[k].y,prev,curr);
    }
}

function select(x)
{
    steps+=1;
    dfs(0,0,bitmap[0][0],x);
    fillColor();
}
function judge()
{
    for(i=0;i<16;i++)
        for(j=0;j<16;j++)
            if(bitmap[i][j]!=bitmap[0][0])
                return 0;
    return 1;
}
function fillColor()
{
    var i,j;
    document.getElementById("stepCounter").style.width=""+(100*steps/32)+"%";
    for(i=0;i<16;i++)
    for(j=0;j<16;j++)
    {
        if(i<10)
        {
            if(j<10)
                var idName="0"+i+"0"+j;
            else
                var idName="0"+i+j; 
        }
        else
        {
            if(j<10)
                var idName=""+i+"0"+j;
            else
                var idName=""+i+j; 
        }
        var elem=document.getElementById(idName);
        elem.style.backgroundColor=bgColor[bitmap[i][j]];
    }
    if(judge()==1)
    {
        document.getElementById("winFlag").style.display="inline";
                
        for(i=0;i<CLASS;i++)
        {
        var idName="b"+i;
        var elem=document.getElementById(idName);
        elem.disabled=true;
        }
    }
    else if(steps>=32)
    {
        document.getElementById("LOSTFlag").style.display="inline";
                
        for(i=0;i<CLASS;i++)
        {
        var idName="b"+i;
        var elem=document.getElementById(idName);
        elem.disabled=true;
        }
    }
}
function init()
{
    var i,j;
    steps=0;
    for(i=0;i<CLASS;i++)
    {
        var idName="b"+i;
        
        var elem=document.getElementById(idName);
        elem.style.backgroundColor=bgColor[i];
        elem.style.visibility="visible";
    }
    for(i=0;i<16;i++)
        for(j=0;j<16;j++)
            bitmap[i][j]=Math.floor(Math.random()*CLASS);
    fillColor();
}
init();
</script>
</body>
</html>
